---
# Schema
$schema: moz://mozilla.org/schemas/glean/metrics/2-0-0

event:
  name:
    type: string
    description: |
      The name of the event
    lifetime: ping
    send_in_pings:
      - accounts-events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7265
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1844121
    expires: never
    data_sensitivity:
      - interaction

  reason:
    description: additional context-dependent (on event.name) info, e.g. the cause of an error
    type: string
    lifetime: ping
    send_in_pings:
      - accounts-events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7265
      - https://mozilla-hub.atlassian.net/browse/FXA-7271
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1844121
    expires: never
    data_sensitivity:
      - interaction

account:
  user_id_sha256:
    type: string
    description: |
      A hex string of a sha256 hash of the account's uid
    lifetime: application
    send_in_pings:
      - accounts-events
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7265
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
    expires: never
    data_sensitivity:
      - interaction
  password_reset:
    type: event
    description: |
      Forgot Password Complete
      Successful completion of the forgot password funnel.
    send_in_pings:
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7265
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1844121
    expires: never
    data_sensitivity:
      - interaction

relying_party:
  service:
    type: string
    description: |
      The service name of the relying party
    lifetime: application
    send_in_pings:
      - accounts-events
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7265
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
    expires: never
    data_sensitivity:
      - technical

  oauth_client_id:
    type: string
    description: |
      The client id of the relying party
    lifetime: application
    send_in_pings:
      - accounts-events
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7265
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
    expires: never
    data_sensitivity:
      - technical

session:
  flow_id:
    type: string
    description: an ID generated by FxA for its flow metrics
    lifetime: application
    send_in_pings:
      - accounts-events
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7265
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1844121
    expires: never
    data_sensitivity:
      - interaction

  device_type:
    type: string
    description: one of 'mobile', 'tablet', or ''
    lifetime: application
    send_in_pings:
      - accounts-events
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7265
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
    expires: never
    data_sensitivity:
      - technical

  entrypoint:
    type: string
    description: entrypoint to the service
    lifetime: application
    send_in_pings:
      - accounts-events
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7265
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1844121
    expires: never
    data_sensitivity:
      - interaction

utm:
  campaign:
    description: |
      A marketing campaign.  For example, if a user signs into FxA from selecting a
      Mozilla VPN plan on Mozilla VPN's product site, then the value of this metric could
      be 'vpn-product-page'.  The value has a max length of 128 characters with the
      alphanumeric characters, _ (underscore), forward slash (/), . (period), %
      (percentage sign), and - (hyphen) in the allowed set of characters.  The
      special value of 'page+referral+-+not+part+of+a+campaign' is also allowed.
    type: string
    lifetime: application
    send_in_pings:
      - accounts-events
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7265
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1844121
    expires: never
    data_sensitivity:
      - interaction

  content:
    description: |
      The content on which the user acted.  For example, if the user clicked on the
      (previously available) "Get started here" link in "Looking for Firefox Sync? Get
      started here", then the value for this metric would be 'fx-sync-get-started'.
      The value has a max length of 128 characters with the alphanumeric characters,
      _ (underscore), forward slash (/), . (period), % (percentage sign), and - (hyphen)
      in the allowed set of characters.
    type: string
    lifetime: application
    send_in_pings:
      - accounts-events
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7265
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1844121
    expires: never
    data_sensitivity:
      - interaction

  medium:
    description: |
      The "medium" on which the user acted.  For example, if the user clicked on a
      link in an email, then the value of this metric would be 'email'.  The value
      has a max length of 128 characters with the alphanumeric characters, _
      (underscore), forward slash (/), . (period), % (percentage sign), and -
      (hyphen) in the allowed set of characters.
    type: string
    lifetime: application
    send_in_pings:
      - accounts-events
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7265
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1844121
    expires: never
    data_sensitivity:
      - interaction

  source:
    description: |
      The source from where the user started.  For example, if the user clicked on a
      link on the Mozilla accounts web site, this value could be 'fx-website'.  The
      value has a max length of 128 characters with the alphanumeric characters, _
      (underscore), forward slash (/), . (period), % (percentage sign), and -
      (hyphen) in the allowed set of characters.
    type: string
    lifetime: application
    send_in_pings:
      - accounts-events
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7265
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1844121
    expires: never
    data_sensitivity:
      - interaction

  term:
    description: |
      This metric is similar to the `utm.source`; it is used in the Firefox
      browser.  For example, if the user started from about:welcome, then the value
      could be 'aboutwelcome-default-screen'.  The value has a max length of 128
      characters with the alphanumeric characters, _ (underscore), forward slash (/),
      . (period), % (percentage sign), and - (hyphen) in the allowed set of
      characters.
    type: string
    lifetime: application
    send_in_pings:
      - accounts-events
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7265
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1844121
    expires: never
    data_sensitivity:
      - interaction

access_token:
  checked:
    type: event
    description: |
      An OAuth access token was verified.
    send_in_pings:
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7265
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1844121
    expires: never
    data_sensitivity:
      - interaction
  created:
    type: event
    description: |
      An OAuth access token was created.
    send_in_pings:
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7265
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1844121
    expires: never
    data_sensitivity:
      - interaction
    extra_keys:
      reason:
        description: additional context-dependent info, e.g. the cause of an error
        type: string
login:
  backup_code_success:
    type: event
    description: |
      Login Backup Code Success
      Event that indicates the user successfully authenticated via backup codes.
    send_in_pings:
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7265
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1844121
    expires: never
    data_sensitivity:
      - interaction
  complete:
    type: event
    description: |
      Login Complete
      Event that indicates the login process is complete.
    send_in_pings:
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7265
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1844121
    expires: never
    data_sensitivity:
      - interaction
  email_confirmation_sent:
    type: event
    description: |
      Login Email Sent
      Event that indicates an email was sent to confirm email.
    send_in_pings:
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7265
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1844121
    expires: never
    data_sensitivity:
      - interaction
  email_confirmation_success:
    type: event
    description: |
      Login Email Confirmed (BE)
      Event that indicates a user successfully confirmed their email for the login
      flow by entering the code sent in the confirmation email.
    send_in_pings:
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7265
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1844121
    expires: never
    data_sensitivity:
      - interaction
  submit_backend_error:
    type: event
    description: |
      Login Submission Failure (Server)
      Event that indicates an attempt to login by clicking "Sign in" on the login
      page was not successful. Ideally we would have additional data on why the
      login failed. We might expect most reasons to be "Incorrect password".
    send_in_pings:
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7265
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1844121
    expires: never
    data_sensitivity:
      - interaction
    extra_keys:
      reason:
        description: additional context-dependent info, e.g. the cause of an error
        type: string
  success:
    type: event
    description: |
      Login Submission Success
      Event that indicates an attempt to login by clicking "Sign in" on the login
      page was successful.
    send_in_pings:
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7265
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1844121
    expires: never
    data_sensitivity:
      - interaction
  totp_code_failure:
    type: event
    description: |
      The user failed to enter a correct TOTP for 2FA.
    send_in_pings:
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7265
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1844121
    expires: never
    data_sensitivity:
      - interaction
  totp_code_success:
    type: event
    description: |
      Login 2FA Success (BE)
      Event that indicates a user successfully authenticated via 2FA.
    send_in_pings:
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7265
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1844121
    expires: never
    data_sensitivity:
      - interaction
password_reset:
  create_new_success:
    type: event
    description: |
      Create New Password Success (BE)
      A new password was successfully created'
    send_in_pings:
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7265
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1844121
    expires: never
    data_sensitivity:
      - interaction
  email_sent:
    type: event
    description: |
      Forgot Password Email Link Sent
      Link to reset password sent to the FxA email address'
    send_in_pings:
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7265
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1844121
    expires: never
    data_sensitivity:
      - interaction
  recovery_key_create_success:
    type: event
    description: |
      Forgot Password w/ Recovery Key Create New Password Success (BE)
      User successfully submits the form to create a new password'
    send_in_pings:
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7265
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1844121
    expires: never
    data_sensitivity:
      - interaction
  recovery_key_success:
    type: event
    description: |
      Forgot Password Confirm Recovery Key Success
      Successful recovery key input for the forgot password flow'
    send_in_pings:
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7265
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1844121
    expires: never
    data_sensitivity:
      - interaction
  email_confirmation_sent:
    type: event
    description: |
      One-Time-Password to initiate the password reset process sent to the FxA
      email address
    send_in_pings:
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-9486
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1896950
    expires: never
    data_sensitivity:
      - interaction
  email_confirmation_success:
    type: event
    description: |
      One-Time-Password to initiate the password reset process was successfully
      verified
    send_in_pings:
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-9486
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1896950
    expires: never
    data_sensitivity:
      - interaction
reg:
  acc_created:
    type: event
    description: |
      Registration Submission Success
      Event that indicates registration was successful.
    send_in_pings:
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7265
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1844121
    expires: never
    data_sensitivity:
      - interaction
  acc_verified:
    type: event
    description: |
      Registration Email Confirmed
      Event that indicates a user successfully entered and submitted the email confirmation
      code from the confirmation email.
    send_in_pings:
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7265
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1844121
    expires: never
    data_sensitivity:
      - interaction
  complete:
    type: event
    description: |
      Confirmation of Registration Successful (BE)
      Event that indicates a new account was successfully registered.
    send_in_pings:
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7265
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1844121
    expires: never
    data_sensitivity:
      - interaction
  email_sent:
    type: event
    description: |
      Registration Email Sent
      Event that indicates a registration email was sent in order to get email confirmation.
    send_in_pings:
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7265
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1844121
    expires: never
    data_sensitivity:
      - interaction
  submit_error:
    type: event
    description: |
      Registration Submission Failure (Server)
      Event that indicates an attempt to submit a registration (clicking "Create
      account") was not successful. Ideally we would have additional data including
      reasons why the submission failed. We might expect most failed reasons to
      be "Incorrect password".
    send_in_pings:
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7265
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1844121
    expires: never
    data_sensitivity:
      - interaction
    extra_keys:
      reason:
        description: additional context-dependent info, e.g. the cause of an error
        type: string
third_party_auth:
  google_login_complete:
    type: event
    description: |
      A user successfully logged in with Google OAuth.
    send_in_pings:
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-9815
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1844121
    expires: never
    data_sensitivity:
      - interaction
    extra_keys:
      linking:
        description: |
          Indicates the initial linking of the Mozilla account and the third-party account.
        type: boolean
  apple_login_complete:
    type: event
    description: |
      A user successfully logged in with Apple OAuth.
    send_in_pings:
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-9817

    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1844121
    expires: never
    data_sensitivity:
      - interaction
    extra_keys:
      linking:
        description: |
          Indicates the initial linking of the Mozilla account and the third-party account.
        type: boolean

third_party_auth_set_password:
  complete:
    type: event
    description: |
      Password for third party user was successfully created
    send_in_pings:
      - events
    notification_emails:
      - vzare@mozilla.com
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-9988
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1830504
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1844121
    expires: never
    data_sensitivity:
      - interaction
